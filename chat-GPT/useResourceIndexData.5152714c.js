import{i as Q,a as K}from"./Footer.b59d04c7.js";import{r as f,o as y,c as _,b as h,t as b,a as v,j as P,K as Y,p as G,F as H,z as J,e as W,i as X,k as V,aa as Z,O as $,f as N,ad as ee,x as z,h as te,C as ae,A as se}from"./entry.59fdb031.js";import{_ as le,b as ie}from"./usePageTransition.0092311c.js";const re={name:"Pagination",props:{currentPage:{type:Number,default:1},fromValue:{type:Number,default:0},maxVisibleButtons:{type:Number,default:10},pages:{type:Number,default:null},sizeValue:{type:Number,default:20},totalResults:{type:Number,default:0},scrollToTop:{type:Boolean,default:!1}},data(){return{active:!1}},computed:{endIndex(){return Math.min(this.getStartIndex()+this.sizeValue-1,this.getTotal()-1)},endItems(){const e=this.localPage*this.sizeValue;return(e<this.totalResults?e:this.totalResults).toLocaleString("en-US")},isNextDisabled(){return this.localPage>=this.getTotal()||this.localPage===this.getRange().endPage||this.getTotal()===0},isPrevDisabled(){return this.fromValue===0&&this.fromValue===1||this.localPage<=1},page(){return Array.from(Array(this.getRange().endPage+1-this.getRange().startPage).keys()).map(e=>this.getRange().startPage+e)},range(){return this.getRange()},startIndex(){return this.getStartIndex()},startItems(){return(this.localPage>1?(this.localPage-1)*this.sizeValue+1:1).toLocaleString("en-US")},total(){return this.getTotal()}},mounted(){document.documentElement.addEventListener("click",this.close)},beforeDestroy(){document.documentElement.removeEventListener("click",this.close)},watch:{currentPage(e){this.localPage=e,this.localFrom=(e-1)*this.sizeValue,this.handlePageChange()}},setup(e){const s=f(e.currentPage),l=f(e.fromValue);return{localPage:s,localFrom:l}},methods:{getRange(){let e,s;if(this.total<=this.maxVisibleButtons)e=1,s=this.getTotal();else{let l=Math.floor(this.maxVisibleButtons/2),n=Math.ceil(this.maxVisibleButtons/2)-1;this.localPage<=l?(e=1,s=this.maxVisibleButtons):this.localPage+n>=this.getTotal()?(e=this.getTotal()-this.maxVisibleButtons+1,s=this.getTotal()):(e=this.localPage-l,s=this.localPage+n)}return{startPage:e,endPage:s}},getStartIndex(){return(this.currentPage-1)*this.sizeValue},getTotal(){return Math.ceil(this.totalResults/this.sizeValue)},close(e){if(this.active=!1,e instanceof KeyboardEvent){const s=this.$el.querySelector("#selectPage");s&&s.focus()}},toggleActive(){this.active=!this.active,this.active&&setTimeout(()=>{const e=this.$el.querySelector("#item_0");e&&e.focus()},10)},handlePageChange(){document.documentElement.classList.remove("scroll-smooth"),this.scrollToTop&&setTimeout(()=>{window.scrollTo({top:0,behavior:"auto"})},10),setTimeout(()=>{document.documentElement.classList.add("scroll-smooth")},15),this.$emit("pageChange",this.localPage)},triggerNext(e){e&&e.target.getAttribute("aria-disabled")==="true"||(this.localPage!==this.total&&(this.localPage+=1,this.localFrom+=this.sizeValue),this.handlePageChange())},triggerPrev(e){e&&e.target.getAttribute("aria-disabled")==="true"||(this.localPage>1&&(this.localPage-=1,this.localFrom-=this.sizeValue),this.handlePageChange())},triggerPage(e){this.localPage=e,this.localFrom=(e-1)*this.sizeValue,this.handlePageChange(),this.toggleActive();const s=this.$el.querySelector("#selectPage");s&&s.focus()}}},ne={class:"cols-container items-center"},oe={class:"xs:w-3-cols md:w-2-cols lg:w-2-cols"},ue={class:"flex justify-end xs:w-3-cols md:w-3-cols md:justify-start lg:w-4-cols"},ce=h("span",{"aria-hidden":"true",class:"hidden md:inline-block"},"Previous page",-1),de=h("span",{"aria-hidden":"true",class:"hidden md:inline-block"},"Next page",-1),he={class:"hidden justify-end md:w-3-cols md:flex lg:w-6-cols"},ge={class:"flex"},me=h("span",{id:"label_1","aria-hidden":"true"},"Current page:",-1),ve={class:"f-ui-1 relative pl-4 pr-4"},fe={id:"label_2"},pe=["aria-hidden"],be={id:"label_3","aria-hidden":"true"};function xe(e,s,l,n,d,u){const i=Q,g=K;return l.totalResults>l.sizeValue?(y(),_("div",{key:0,class:"mt-spacing-7 f-ui-1 border-t border-primary pt-16 md:pt-8",onKeyup:s[0]||(s[0]=Z((...c)=>u.close&&u.close(...c),["esc"]))},[h("div",ne,[h("div",oe,b(parseFloat(u.startItems,10).toLocaleString("en-US"))+" – "+b(parseFloat(u.endItems,10).toLocaleString("en-US"))+" of "+b(parseFloat(l.totalResults,10).toLocaleString("en-US")),1),h("div",ue,[v(g,{button:"",classes:`hover:bg-inverse hover:text-inverse md:hover:text-primary md:hover:bg-transparent group inline-flex border border-primary p-[13px] md:border-0 md:p-0 underline-transparent underline-thickness-1 underline-offset-4 hover:underline hover:underline-text-primary mr-8 md:mr-16 ${u.isPrevDisabled?"hidden":""}`,"aria-label":"Previous page","aria-disabled":u.isPrevDisabled,onClick:u.triggerPrev},{default:P(()=>[v(i,{"aria-hidden":"true",name:"ArrowLeft400",size:"text",class:"relative a-icon--no-align md:top-[.075em] block h-16 md:mr-4 md:inline md:h-auto"}),ce]),_:1},8,["classes","aria-disabled","onClick"]),v(g,{button:"",classes:`hover:bg-inverse hover:text-inverse md:hover:text-primary md:hover:bg-transparent group inline-flex border border-primary p-[13px] md:border-0 md:p-0 underline-transparent underline-thickness-1 underline-offset-4 hover:underline hover:underline-text-primary ${u.isNextDisabled?"hidden":""}`,"aria-label":"Next page","aria-disabled":u.isNextDisabled,onClick:u.triggerNext},{default:P(()=>[de,v(i,{"aria-hidden":"true",name:"ArrowRight400",size:"text",class:"relative a-icon--no-align md:top-[.075em] block h-16 md:ml-4 md:inline md:h-auto"})]),_:1},8,["classes","aria-disabled","onClick"])]),h("div",he,[h("div",ge,[me,h("div",ve,[v(g,{id:"selectPage",button:"",class:"border-0 bg-none","aria-labelledby":"label_1 label_2 label_3","aria-expanded":d.active,onClick:Y(u.toggleActive,["prevent","stop"])},{default:P(()=>[h("span",fe,b(n.localPage),1),v(i,{name:"ChevronDown400",size:"text","aria-hidden":"true",class:"relative a-icon--no-align"})]),_:1},8,["aria-expanded","onClick"]),u.page?(y(),_("ul",{key:0,"aria-label":"Select a page",class:G(`absolute -top-12 -left-24 z-30 ml-2 -mt-1 list-none border border-primary bg-primary pt-12 pr-28 pb-12 pl-12 text-right transition-opacity ${d.active?"block opacity-100":"hidden opacity-0"}`),"aria-hidden":!d.active},[(y(!0),_(H,null,J(u.page,(c,r)=>(y(),_("li",{key:r,class:"relative"},[v(g,{id:`item_${r}`,button:"",classes:"underline-transparent underline-thickness-1 underline-offset-4 hover:underline hover:underline-text-primary","aria-disabled":l.currentPage===c?"true":null,onClick:w=>u.triggerPage(c)},{default:P(()=>[W(b(c)+" ",1),r===0?(y(),X(i,{key:0,name:"ChevronUp400",size:"text","aria-hidden":"true",class:"absolute a-icon--no-align right-0 translate-x-full transform"})):V("",!0)]),_:2},1032,["id","aria-disabled","onClick"])]))),128))],10,pe)):V("",!0)]),h("span",be,"of "+b(Math.ceil(l.totalResults/l.sizeValue)),1)])])])],32)):V("",!0)}const we=le(re,[["render",xe]]),ye=()=>{const e=$("index-filters",()=>{});function s(l,n){if(typeof l>"u")return;const d={},u=(i,g)=>i.length?i.map(c=>({title:c.title,id:c.id,slug:c.slug,type:c.type,count:c[g]})):[];Object.keys(l).map(i=>{const g=typeof n=="string"?n:n[i]?n[i]:n.default??null;d[i]=u(l[i],g)}),e.value=d}return{indexFilters:e,setIndexFilters:s}},_e=(e,s)=>(s??[]).filter(({slug:l})=>{var n;return(n=Array.isArray(e)?e:[e])==null?void 0:n.includes(l)}).map(({slug:l})=>l);function R(){const{indexFilters:e}=ye(),{query:s}=N(),l=ee({});return typeof e.value=="object"&&Object.keys(e.value).map(n=>{const d=_e(s[n]?s[n].split(","):null,e.value[n]);d&&(l[n]=d)}),l}const Pe=[{label:"Date: newest",value:"-publicationDate,-createdAt",query:"newest"},{label:"Date: oldest",value:"publicationDate,createdAt",query:"oldest"}];function Fe(){return({name:e="default",fetchCallback:s,fetchCallbackOptions:l={},search:n=null,sorts:d=null,page:u=1})=>{const i=N(),g=R(),c=f(i.query.q??n??""),r=f(g),w=(t,a,o,k=!1)=>{if(o)k?r.value[t]=[a]:r.value[t].indexOf(a)===-1&&r.value[t].push(a),r.value={...r.value};else{const A=r.value[t].indexOf(a);A>-1&&(r.value[t].splice(A,1),r.value={...r.value})}},D=()=>{r.value=R()},j=()=>{const t={};Object.keys(r.value).map(a=>{t[a]=[]}),r.value={...t},p.value=m.value[0].value,C(1)},m=f(d??Pe),p=f((()=>{let t=m.value[0].value;const a=i.query.sort&&m.value.findIndex(o=>o.query===i.query.sort);return a>0&&(t=m.value[a].value),t})()),x=f(i.query.page?parseInt(i.query.page):u),B=z(()=>{const t={sort:p.value,pageNumber:x.value,search:c.value,...r.value,...l};return Object.keys(t).reduce((a,o)=>((!t[o]||Array.isArray(t[o])&&t[o].length===0)&&delete a[o],a),t)}),{pending:F,data:T,refresh:S,error:L}=ie(`resource-index-${e}`,()=>s(B.value),{server:!0}),E=z(()=>{var t;return(t=T.value)==null?void 0:t.page});let q=null;const O=t=>{t.preventDefault(),C(1)},I=t=>{C(t)},U=t=>{const a=m.value.find(o=>o.value===t);a&&(p.value=a.value)},C=t=>{const a={};if(r.value&&Object.keys(r.value).map(o=>{r.value[o].join(",")!==""&&(a[o]=Object.values(r.value[o]).join(","))}),c.value?a.q=c.value:delete a.q,t&&t>1?(x.value=t,a.page=x.value):(x.value=1,delete a.page),p.value){const o=m.value.findIndex(k=>k.value===p.value);o>0&&(a.sort=m.value[o].query)}se({query:a}),q=setInterval(()=>{F.value||clearInterval(q)},500)},M=()=>{const t=document.querySelector("[data-index-scroll-element]");let a=0;if(t){const o=t.getBoundingClientRect();a=window.scrollY+o.top-80}window.scrollTo({top:a,behavior:"auto"})};return te(()=>{S()}),ae(()=>i.query,async()=>{D(),M(),c.value=i.query.q??n??"";const t=i.query.page?parseInt(i.query.page):1;I(t),S()}),{currentPage:x,search:c,selectedFilters:r,sorts:m,sort:p,setSort:U,page:E,onSubmit:O,setCurrentPage:I,setSelectedFilter:w,clearSelectedFilters:j,pending:F,data:T,refresh:S,error:L}}}export{we as _,ye as a,Fe as u};
